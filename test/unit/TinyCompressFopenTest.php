<?php

require_once dirname( __FILE__ ) . '/TinyCompressSharedTestCase.php';

class Tiny_Compress_Fopen_Test extends Tiny_Compress_Shared_TestCase {
	public static function setUpBeforeClass() {
		Tiny_PHP::$client_library_supported = false;
	}

	public function setUp() {
		stream_wrapper_unregister( 'https' );
		stream_wrapper_register( 'https', 'MockHttpStreamWrapper', STREAM_IS_URL );
		MockHttpStreamWrapper::clear();
		parent::setUp();
	}

	public function tearDown() {
		stream_wrapper_restore( 'http' );
	}

	protected function register($method, $url, $details) {
		MockHttpStreamWrapper::register( $method, $url, $details );
	}

	public function testShouldReturnFopenCompressorIfClientNotSupported() {
		$this->assertInstanceOf( 'Tiny_Compress_Fopen', $this->compressor );
	}

	public function testCanCreateKeyShouldReturnFalse() {
		$this->assertSame( false, $this->compressor->can_create_key() );
	}
}
