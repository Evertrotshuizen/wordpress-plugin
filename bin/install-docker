#!/bin/bash -x

# Copyright 2016 go-dockerclient authors. All rights reserved.
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file.

if [[ $TRAVIS_OS_NAME == "linux" ]]; then
    sudo stop docker || true
    sudo rm -rf /var/lib/docker
    sudo rm -f `which docker`
    sudo rm -f `which docker-compose`

    sudo apt-get update
    sudo apt-get install docker-engine=${DOCKER_VERSION}-0~$(lsb_release -cs) -y --force-yes -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold"

    curl -L https://github.com/docker/compose/releases/download/1.8.0-rc1/docker-compose-`uname -s`-`uname -m` | sudo dd of=/usr/local/bin/docker-compose
    sudo chmod +x /usr/local/bin/docker-compose
fi
